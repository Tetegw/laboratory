# 风格指南

这里是官方的Vue特有代码的风格指南。如果在工程中使用Vue，为了回避错误、小纠结和反模式，该指南是份不错的参考。不过我们也不确信风格指南的所有内容对于所有的团队或工程都是理想的。所以根据过去的经验、周围的技术栈、个人价值观做出有意义的偏差是可取的。

对于其绝大部分，我们也总体上避免就Javascript或HTML的本身提出建议。我们不介意你是否使用分号或者结尾的逗号。我们不介意你在HTML特性中使用单引号还是双引号。不过当我们发现Vue的情景下有帮助的特定模式时，也存在例外。

> 不久之后，我们还会提供操作层面的技巧。有的时候你只需要遵循规则，而我们会尽可能向你展示如何使用ESlint既其它自动化程序把操作层面弄得更简单。

最终，我们把所有的规则归为了四大类：



## 规则归类

### 优先级A：必要的

这些规则会帮你规避错误，所以学习并接受他们带来的全部代价吧。这里面可能存在例外，但应该非常少，且只有你同时精通Javascript和Vue才可以这样做。



### 优先级B：强烈推荐

这些规则能够在绝大多数工程中改善可读性和开发体验。即使你违反了，代码还是能照常运行。但是例外应该尽可能少且有合理的理由。



### 优先级C：推荐

当存在多个同样好的选项，选任意一个都可能确保一致性。在这些规则里，我们描述了每个选项并建议一个默认的选择。也就是说只要保持一致且理由充分，你可以随意在你的代码库中做出不同的选择。请务必给出一个好的理由！通过接受社区的标准，你将会：

1. 训练你的大脑，以便更容易的处理你在社区遇到的代码；
2. 不做修改就可以直接复制粘贴社区的代码示例；
3. 能够经常招聘到和你编码习惯相同的新人，至少跟Vue相关的东西是这样的。



### 优先级D： 谨慎使用

有些Vue特性的存在是为了照顾极端情况或帮助老代码的平稳迁移。当被过度使用时，这些特性会让你的代码难于维护甚至变成Bug的来源。这些规则是为了给有潜在风险的特性敲个警钟，并说明它们什么时候不应该使用以及为什么。



## 优先级A的规则：必要的(规避错误)

### 组件名为多个单词 [必要]

**组件名应该始终是多个单词的，根组件`APP`除外。**

这样做可以避免跟现有的以及未来的HTML元素相冲突，因为所有的HTML元素名称都应该是单个单词的。

```js
反例：

Vue.component('todo', {
	//...  
})

export default {
  name: 'Todo',
  //...
}
```



```js
好例子：

Vue.component('todo-item', {
  //...
})

export default {
  name: 'TodoItem',
  //...
}
```



### 组件数据[必要]

组件的`data`必须是一个函数。

当在组件中使用`data`属性的时候(除了`new Vue`外的任何地方)，它的值必须返回一个对象的函数。

```js
详解
当`data`的值是一个对象时，它会在这个组件的所有实例之间共享。想象一下，假如一个`TodoList`组件的数据是这样的：

data: {
  listTitle: '',
  todos: []
}

我们可能希望重用这个组件，允许用户维护多个列表(比如分为购物、心愿单、日常事务等)。这时就会产生问题。因为每一个组件的实例都是引用了相同的数据对象，更改其中一个列表的标题就会改变其它每一个列表的标题。增删改一个待办事项的时候也是如此。

取而代之的是，我们希望每一个组件实例都管理其自己的数据。为了做到这一点，每个实例必须生成一个独立的数据对象。在Javascript中，在一个函数中返回这个对象就可以了：

data: function () {
  return {
    listTitle: '',
    todos: []
  }
}
```



###　Prop定义[必要]

Prop定义应该尽量详细

```js
详解
细致的prop定义有两个好处：
- 它们写明组件的API，所以很容易看懂组件的用法；
- 在开发环境下，如果向一个组件提供格式不正确的prop，Vue将会告警，以帮助你捕获潜在的错误来源。

反例
// 这样做只有开发原型系统时可以接受
prop：['status']

好例子
prop: {
  status: String
}
更好的做法
props: {
  status: {
    type: String,
    require: true,
    validator: function (value) {
      return [
        'syncing',
        'synced',
        'version-conflict',
        'error'
      ].indexOf(value) !== -1
    }
  }
}
```



### 为`v-for`设置键值[必要]

**总是用`key`配合`v-for`。**

在组件上总是必要用`key`配合`v-for`，以便维护内部组件及其子树的状态。甚至在元素上维护可预测的行为，比如动画中`对象固化`，也是一种好的做法。

```js
详解

data: function () {
  retun {
    todos: [
      {
        id: 1,
        text: '学习使用 v-for'
      },
      {
        id: 2,
        text: '学习使用 key'
      }
    ]
  }
}

然后你把它们按照字母顺序排序。在更新DOM的时候，Vue将会优化渲染把可能的DOM变动降到最低。既可能删除掉第一个待办事项元素，然后把它重新加回到列表的最末尾。

这里的问题在于，不要删除仍然会留在DOM中的元素。比如你想用<trnasiton-group>给列表加过渡动画，或想在被渲染元素是`<input>`时保持聚焦。在这些情况下，为每一个项目添加一个唯一的键值(比如`:key="todo.id"`)将会让Vue知道如何使行为更加容易预测。

根据我们的经验，最好始终添加一个唯一的键值，以便你和你团队永远不必担心这些极端情况。也在少数对性能有严格要求的情况下，为了避免对象固化，你可以刻意做一些非常规的处理。
```

































