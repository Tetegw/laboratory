前端网 **老姚 **的《javaScript正则表达式迷你书》学习笔记



# 正则表达式



## 第一章 字符匹配

>  正则表达式是匹配模式，要么匹配字符，要么匹配位置。



### 1.两种模糊匹配

横向匹配、纵向匹配

- 横向匹配指的是，可匹配的字符串长度不是固定的。**量词**

  ```javascript
  var reg = /ab{2,5}c/g
  var string = 'abc abbc abbbc abbbbc abbbbbc  abbbbbbc'
  console.log(string.match(reg))
  // => ['abbc', 'abbbc', 'abbbbc', 'abbbbbc']
  ```

- 纵向模糊匹配指的是，匹配字符可以不是某个确定的字符。**字符组**

  ```javascript
  var reg = /a[123]b/g
  var string = 'a0b a1b a2b a3b a4b'
  console.log(string.match(reg))
  // => [a1b', 'a2b', 'a3b']
  ```



### 2.字符组

虽然是字符组，但只匹配其中一个字符

- 范围表示法

  例如[123456abcdefgHIJKLMN] 简化为 [1-6a-gH-N]；如果只需要'a','-','z'其中一个，不能写成[a-z]，可以写成[-az],[az-],[a\\-z]。

- 排除字符组

  [^abc]表示一个除了'a','b','c'之外的任意一个字符。^ 称为脱字符。

- 常见的简写形式

  | 字符组  | 具体含义                                     |
  | ---- | ---------------------------------------- |
  | \d   | 表示[0-9] digit(数字)                        |
  | \w   | 表示[0-9a-zA-Z_] word 单词字符                 |
  | \s   | 表示[\t\v\n\r\f] 空白符，空格、水平制表符、垂直制表符、换行符、回车符、换页符。 space(空格) |
  | .    | 除了换行符，回车符，行分割符和段分割符除外  (省略号联想法…)         |

  如果想匹配任意字符 [\d\D]、\w\W]、[\s\S] 和 [^]任意一个都可以



### 3.量词

- 简写形式

  {m,} 至少m次

  {m} 相当于{m,m}只出现m次

  ？ 是否存在，要么0要么1

  \+  追加的意思，需要至少有1个

  \*   天上的星星，可以为n，也可以为0 

- 贪婪匹配与惰性匹配

  `\d{2,5}\g` 贪婪匹配，2-5个都可以，最先匹配5个，在能力范围内，越多越好。

  `\d{2,5}?\g` 惰性匹配，虽然2-5个都可以，但是当有2个时就不再匹配了，在能力范围内，越少越好。

  **在`量词`后加问号就能实现惰性匹配**

  ```javascript
  var regex = /\d{2,5}/g
  var string = "123 1234 12345 123456"
  console.log( string.match(regex) )
  // => ["123", "1234", "12345", "12345"]

  var regex = /\d{2,5}?/g
  var string = "123 1234 12345 123456"
  console.log( string.match(regex) )
  // => ["12", "12", "34", "12", "34", "12", "34", "56"]
  ```



### 4.多选分支

一个模式可以实现横向和纵向模糊匹配，而多选分支可以支持多个子模式任选其一。

```javascript
var reg = /good|nice/g
var string = 'good idea, nice try.'
console.log(string.match(reg))
// => ['good', 'nice']

var regex = /good|goodbye/g;
var string = "goodbye";
console.log( string.match(regex) );
// => ["good"] 当前者匹配成功了，不再匹配后者
```

多选分支是惰性的。**所以使用分支结构需要注意顺序**



### 5.案例分析

> 匹配字符无非是 **字符组**、**量词**、**分支结构**的组合罢了。

- 匹配16进制颜色值

  `var reg= /#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/g`

- 匹配24小时制时间

  `var reg = /^([0-1][0-9]|2[0-3]):[0-5][0-9]$/`

- 匹配日期yyyy-mm-dd

  `var reg = /^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/`

**排除特殊字符,且不能为空`[^\\:*<>|"?\r\n/]+`**



## 第二章 位置匹配 

### 1.什么是位置

相邻字符之间的位置(锚)



### 2.如何匹配位置

在es5中有6个锚

^、$、\b、\B、(?=p)、(?!p)

- ^ 和 $ ，脱字符和美元符分别匹配开头和结尾

  ```javascript
  var result = "hello".replace(/^|$/g, '#')
  ```

  修饰符`m`代表多行匹配模式

- \b 和 \B， \b是单词边界，也就是\w和\W之间位置 以及\w和^之间位置，\w和$之间位置。\B是\b的反义

  ```javascript
  var result = '[JS] Lession_01.mp4'.replace(/\b/g,'#')
  console.log(result)
  // => "[#JS#] #Lession_01#.#mp4#"
  ```

- (?=p)  和  (?!p) ，(?=p)代表匹配p前面的那个锚。后者相反

  ```javascript
  var result = 'hello'.replace(/(?=l)/g, '#')
  console.log(result)
  // => he#l#lo
  ```



### 3.位置的特性

对于位置的理解，可以理解为空字符串""。

```
"hello" = "" + "h" + "" + "e"...
```



### 4.相关案例



